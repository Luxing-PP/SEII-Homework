# 第三阶段初步分工


## 项目需求（摘自需求概述2021v2）

- 创建题目
教师用户可以创建题目并添加到题库。题目的内容包括题干、答案、解析、对应课程id等信息。

- 创建測试
教师用户可以创建课程测试，从课程题库中挑选题目加入测试井设置开始时间、结束时间等内容。

- 获取測试列表
学生用户可以根据课程查看已发布的測试列表

- 获取測试信息
状态为进行中的测试，学生用户可以获取题目信息并进行作答。
状态为已结束的测试，学生用户可以获取得分情况，查看每一题的正确答案和解析。

- 提交测试
学生用户可以提交测试的作答，平台会对作答进行正误判断，记录作答信息和得分情况。

## 前端页面

- 教师用户创建题目和创建测试需要一个共同vue页面，具体来说，可以有两个按钮，创建题目后直接显示，并在旁边显示选择框，选择完成后点击创建测试即可。（进入此界面需要从教师的课程列表里进入）
- 学生在某一课程中点击查看测试列表，进入课程测试列表界面
- 学生点击某一测试进入测试页面，测试页面要根据进行中或者已结束两种状态进行改变，即作答模式或者答案模式。
  - 当作答模式时，学生可以进行提交，（不允许未作答的题目发生）。

## 前端和后端的接口

**实现的越宝描述变动较大，具体参见TestController 和CourseQuestionController**懒得CV了

**改动原因：**一部分是因为越宝写的和实际完全对不上，另一部分是为了和67的代码风格保持一致

- 教师创建题目：POST:  /question/{classID}

  参数：题干，答案，解析，

- 教师创建测试：POST: /test/create/{classID}

  参数：题目id （列表），starttime，finishtime 

- 获取跟当前课程有关的所有题目（教师在创建测试的时候用）: GET: /question/getAll/{classID}

- 获取测试列表（老师在查看时获取同时可以继续添加，学生查看测试） GET: /test/getAll/{classID}

- 获取指定测试中的所有题目 GET： /test/get/{testid}

  - 当测试还未结束时，注意前端要给出做题的ui
  - 当测试结束时，前端要给出作答的情况和得分

- 学生提交测试： POST：/test/submit/{studentID}/{testID}

  参数：各题目的答案

## 后端数据库

改动均在sql文件中，使用前也不要忘了用sql文件执行一下

某课程的所以问题表

```mysql
CREATE TABLE `course_question`(
    `id`  BIGINT NOT NULL AUTO_INCREMENT,
    `course_id` BIGINT NOT NULL,
    `answer_id` BIGINT NOT NULL UNIQUE ,
    `description` VARCHAR(255) NOT NULL,
    PRIMARY KEY (`id`) USING BTREE
)
```

为防止答案泄露分装的问题答案表

```mysql
CREATE TABLE `question_answer`(
    `id` BIGINT NOT NULL AUTO_INCREMENT,
    `correct_answer` VARCHAR(255) NOT NULL,
    `explain` VARCHAR(255) NULL DEFAULT NULL,
    PRIMARY KEY (`id`) USING BTREE
)
```

朴实无华测试表

```mysql
CREATE TABLE `test` (
    `id`  BIGINT NOT NULL AUTO_INCREMENT,
    `course_id` BIGINT NOT NULL ,
    `start_time` datetime(0) NULL DEFAULT NULL,
    `end_time`   datetime(0) NULL DEFAULT NULL,
    `tname` VARCHAR(255) NOT NULL,  
    PRIMARY KEY (`id`) USING BTREE
)
```

测试问题表

```mysql
CREATE TABLE `test_question`(
    `id` BIGINT NOT NULL AUTO_INCREMENT,
    `question_id` BIGINT NOT NULL , #哪个问题
    `test_id` BIGINT NOT NULL , #哪个测试
    PRIMARY KEY (`id`) USING BTREE
);
```

学生提交答案表

```mysql
CREATE TABLE `test_result`(
  `id` BIGINT NOT NULL AUTO_INCREMENT,
  `tid` BIGINT NOT NULL,
  `uid` BIGINT NOT NULL,
  `user_answer` VARCHAR(255) NOT NULL,
  PRIMARY KEY (`id`) USING BTREE
);
```



## 问题

1. 需要设计多种题型吗？（选择填空多选....）

2. 分数不用存在数据库，全部延后到前端手算吗？